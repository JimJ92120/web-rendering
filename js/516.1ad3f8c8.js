(self["webpackChunkweb_rendering"]=self["webpackChunkweb_rendering"]||[]).push([[516],{4019:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,n,r){"use strict";var e,o,i,a=r(4019),s=r(9781),c=r(7854),f=r(614),u=r(111),h=r(2597),d=r(648),l=r(6330),p=r(8880),y=r(8052),g=r(3070).f,m=r(7976),v=r(9518),A=r(7674),x=r(5112),w=r(9711),R=c.Int8Array,T=R&&R.prototype,C=c.Uint8ClampedArray,_=C&&C.prototype,E=R&&v(R),P=T&&v(T),$=Object.prototype,b=c.TypeError,I=x("toStringTag"),S=w("TYPED_ARRAY_TAG"),U=w("TYPED_ARRAY_CONSTRUCTOR"),Z=a&&!!A&&"Opera"!==d(c.opera),F=!1,O={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},L=function(t){if(!u(t))return!1;var n=d(t);return"DataView"===n||h(O,n)||h(B,n)},Y=function(t){if(!u(t))return!1;var n=d(t);return h(O,n)||h(B,n)},k=function(t){if(Y(t))return t;throw b("Target is not a typed array")},z=function(t){if(f(t)&&(!A||m(E,t)))return t;throw b(l(t)+" is not a typed array constructor")},D=function(t,n,r,e){if(s){if(r)for(var o in O){var i=c[o];if(i&&h(i.prototype,t))try{delete i.prototype[t]}catch(a){try{i.prototype[t]=n}catch(f){}}}P[t]&&!r||y(P,t,r?n:Z&&T[t]||n,e)}},V=function(t,n,r){var e,o;if(s){if(A){if(r)for(e in O)if(o=c[e],o&&h(o,t))try{delete o[t]}catch(i){}if(E[t]&&!r)return;try{return y(E,t,r?n:Z&&E[t]||n)}catch(i){}}for(e in O)o=c[e],!o||o[t]&&!r||y(o,t,n)}};for(e in O)o=c[e],i=o&&o.prototype,i?p(i,U,o):Z=!1;for(e in B)o=c[e],i=o&&o.prototype,i&&p(i,U,o);if((!Z||!f(E)||E===Function.prototype)&&(E=function(){throw b("Incorrect invocation")},Z))for(e in O)c[e]&&A(c[e],E);if((!Z||!P||P===$)&&(P=E.prototype,Z))for(e in O)c[e]&&A(c[e].prototype,P);if(Z&&v(_)!==P&&A(_,P),s&&!h(P,I))for(e in F=!0,g(P,I,{get:function(){return u(this)?this[S]:void 0}}),O)c[e]&&p(c[e],S,e);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:Z,TYPED_ARRAY_CONSTRUCTOR:U,TYPED_ARRAY_TAG:F&&S,aTypedArray:k,aTypedArrayConstructor:z,exportTypedArrayMethod:D,exportTypedArrayStaticMethod:V,isView:L,isTypedArray:Y,TypedArray:E,TypedArrayPrototype:P}},8544:function(t,n,r){var e=r(7293);t.exports=!e((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},9518:function(t,n,r){var e=r(7854),o=r(2597),i=r(614),a=r(7908),s=r(6200),c=r(8544),f=s("IE_PROTO"),u=e.Object,h=u.prototype;t.exports=c?u.getPrototypeOf:function(t){var n=a(t);if(o(n,f))return n[f];var r=n.constructor;return i(r)&&n instanceof r?r.prototype:n instanceof u?h:null}},4590:function(t,n,r){var e=r(7854),o=r(3002),i=e.RangeError;t.exports=function(t,n){var r=o(t);if(r%n)throw i("Wrong offset");return r}},3002:function(t,n,r){var e=r(7854),o=r(9303),i=e.RangeError;t.exports=function(t){var n=o(t);if(n<0)throw i("The argument can't be less than 0");return n}},8675:function(t,n,r){"use strict";var e=r(260),o=r(6244),i=r(9303),a=e.aTypedArray,s=e.exportTypedArrayMethod;s("at",(function(t){var n=a(this),r=o(n),e=i(t),s=e>=0?e:r+e;return s<0||s>=r?void 0:n[s]}))},3462:function(t,n,r){"use strict";var e=r(7854),o=r(6916),i=r(260),a=r(6244),s=r(4590),c=r(7908),f=r(7293),u=e.RangeError,h=e.Int8Array,d=h&&h.prototype,l=d&&d.set,p=i.aTypedArray,y=i.exportTypedArrayMethod,g=!f((function(){var t=new Uint8ClampedArray(2);return o(l,t,{length:1,0:3},1),3!==t[1]})),m=g&&i.NATIVE_ARRAY_BUFFER_VIEWS&&f((function(){var t=new h(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));y("set",(function(t){p(this);var n=s(arguments.length>1?arguments[1]:void 0,1),r=c(t);if(g)return o(l,this,r,n);var e=this.length,i=a(r),f=0;if(i+n>e)throw u("Wrong length");while(f<i)this[n+f]=r[f++]}),!g||m)},1624:function(t,n,r){"use strict";r.d(n,{Z:function(){return o}});var e=r(2482);r(1703);class o{constructor(t){(0,e.Z)(this,"buffer",void 0),(0,e.Z)(this,"context",void 0),this.context=t,this.setBuffer()}load(t){this.context.bindBuffer(this.context.ARRAY_BUFFER,this.buffer),this.context.bufferData(this.context.ARRAY_BUFFER,t,this.context.STATIC_DRAW)}setBuffer(){const t=this.context.createBuffer();if(!t)throw new Error("buffer not created.");this.buffer=t}}},9501:function(t,n,r){"use strict";r.d(n,{Z:function(){return o}});var e=r(2482);r(1703);class o{constructor(t){(0,e.Z)(this,"context",void 0),(0,e.Z)(this,"program",void 0),this.context=t,this.setProgram()}isLinked(){return this.context.getProgramParameter(this.program,this.context.LINK_STATUS)}link(){if(this.context.linkProgram(this.program),!this.isLinked()){const t=this.context.getProgramInfoLog(this.program);throw this.context.deleteProgram(this.program),new Error(t||"program not linked.")}}setProgram(){const t=this.context.createProgram();if(!t)throw new Error("program not created.");this.program=t}}},9300:function(t,n,r){"use strict";r.d(n,{Z:function(){return o}});var e=r(2482);r(1703);class o{constructor(t){(0,e.Z)(this,"canvas",void 0),(0,e.Z)(this,"context",void 0),this.setCanvas(t),this.setContext()}clearColor(t){this.context.clearColor(t[0],t[1],t[2],t[3]),this.context.clear(this.context.COLOR_BUFFER_BIT)}resize(t){this.canvas.width=t[0],this.canvas.height=t[1],this.context.viewport(0,0,t[0],t[1])}setCanvas(t){const n=document.getElementById(t);if(!n)throw new Error("canvas not found.");this.canvas=n}setContext(){const t=this.canvas.getContext("webgl2");if(!t)throw new Error("context not found.");this.context=t}}},2795:function(t,n,r){"use strict";r.d(n,{Z:function(){return o}});var e=r(2482);r(1703);class o{constructor(t,n,r){(0,e.Z)(this,"context",void 0),(0,e.Z)(this,"shader",void 0),(0,e.Z)(this,"source",void 0),(0,e.Z)(this,"type",void 0),this.context=t,this.source=r,this.type=n,this.create(),this.compile()}create(){const t=this.context.createShader(this.type);if(!t)throw new Error("shader not found.");this.shader=t}compile(){if(this.context.shaderSource(this.shader,this.source),this.context.compileShader(this.shader),!this.isCompiled()){const t=this.context.getShaderInfoLog(this.shader);throw this.context.deleteShader(this.shader),new Error(t||"shader not compiled.")}}isCompiled(){return this.context.getShaderParameter(this.shader,this.context.COMPILE_STATUS)}}},516:function(t,n,r){"use strict";r.r(n),r.d(n,{run:function(){return s}});r(8675),r(3462);var e=r(9300),o=r(9501),i=r(2795),a=r(1624);function s(t){console.log("running...");const n=new e.Z(t),r=[800,500],s=[0,0,0,1];n.resize(r),n.clearColor(s);const{canvas:c,context:f}=n,u=new o.Z(f),h="u_resolution",d="u_time",l="a_index",p="u_count",y="u_pixelSize",g=`#version 300 es\n    precision highp float;\n\n    #define PI radians(180.0)\n\n    uniform vec2 ${h};\n    uniform vec3 ${d};\n    uniform float ${p};\n    uniform float ${y};\n\n    in float ${l};\n\n    out float index;\n\n    void main() {\n      // receives 12 + 3 at the end for needs to overlap\n      // 13rd: hours\n      // 14th: minutes\n      // 15th: seconds\n      float needles = 3.0;\n      float currentCount = ${p} - needles;\n\n      float radius = 0.75;\n      float aspect = ${h}.y / ${h}.x;\n      vec2 scale = vec2(aspect, 1.0);\n\n      float u;\n\n      if (${l} == 14.0) {\n        float seconds = ${d}[2];\n        float rotation = 15.0;\n\n        u = (60.0 - seconds) / 60.0;\n      } else if (${l} == 13.0) {\n        float minutes = ${d}[1];\n        float rotation = 15.0;\n\n        u = (60.0 - minutes + rotation) / 60.0;\n      } else if (${l} == 12.0) {\n        float hours = ${d}[0];\n        float minutes = ${d}[1];\n        float maxHours = 12.0;\n\n        if (${d}[0] > maxHours) {\n          hours = hours - maxHours;\n        }\n\n        float rotation = 3.0;\n        float minutesRotation = minutes / 60.0;\n\n        u = (12.0 - hours + rotation - minutesRotation) / currentCount;\n      } else {\n        float rotation = -5.0;\n        float currentIndex = ${l} - 1.0 + rotation;\n        u = (currentCount - currentIndex) / currentCount;\n      }\n      \n      // else starts 1/4 off\n      float angle = u * PI * 2.0;\n      vec2 position = vec2(cos(angle), sin(angle)) * radius;\n      \n      gl_Position = vec4(position * scale, 0.0, 1.0);\n\n      float sizeRatio;\n      if (${l} == 14.0) {\n        sizeRatio = 2.0;\n      } else if (${l} == 13.0) {\n        sizeRatio = 3.0;\n      } else if (${l} == 12.0) {\n        sizeRatio = 4.0;\n      } else if (mod(${l} - needles, 3.0) == 0.0) {\n        sizeRatio = 1.5;\n      } else {\n        float mod = mod(${l} - needles, 3.0);\n\n        sizeRatio = mod * 0.5;\n      }\n\n      gl_PointSize = ${y} * sizeRatio;\n      index = ${l};\n    }\n  `,m=`#version 300 es\n    precision highp float;\n\n    uniform vec2 ${h};\n    uniform vec3 ${d};\n\n    in float index;\n\n    out vec4 fragColor;\n\n    void main() {\n      if (index == 14.0) {\n        fragColor = vec4(1.0, 0.0, 0.0, 1.0);\n      } else if (index == 13.0) {\n        fragColor = vec4(0.0, 1.0, 0.0, 1.0);\n      } else if (index == 12.0) {\n        fragColor = vec4(0.0, 0.0, 1.0, 1.0);\n      } else {\n        fragColor = vec4(1.0, 1.0, 1.0, 1.0);\n      }\n    }\n  `,v=new i.Z(f,f.VERTEX_SHADER,g),A=new i.Z(f,f.FRAGMENT_SHADER,m);[v,A].map((t=>{t.compile(),f.attachShader(u.program,t.shader)})),u.link(),f.useProgram(u.program);const x=15,w=1,R=10,T=new Float32Array([...Array(x).keys()].map((t=>Number(t)))),C=new a.Z(f);C.load(T);const _=f.getAttribLocation(u.program,l);f.enableVertexAttribArray(_),f.vertexAttribPointer(_,w,f.FLOAT,!1,0,0);const E=f.getUniformLocation(u.program,h),P=f.getUniformLocation(u.program,d),$=f.getUniformLocation(u.program,p),b=f.getUniformLocation(u.program,y);f.uniform2f(E,c.width,c.height),f.uniform3f(P,1,0,1),f.uniform1f($,x),f.uniform1f(b,R);const I=()=>{n.clearColor(s);const t=new Date;f.uniform3f(P,t.getHours(),t.getMinutes(),t.getSeconds()),f.drawArrays(f.POINTS,0,T.length/w),requestAnimationFrame(I)};requestAnimationFrame(I)}},2482:function(t,n,r){"use strict";function e(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}r.d(n,{Z:function(){return e}})}}]);
//# sourceMappingURL=516.1ad3f8c8.js.map